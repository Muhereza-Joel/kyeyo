import{r as D,p as u,m as ie,a as _,j as p,L as ae}from"./app-CjaHgz8i.js";import{A as se,a as oe}from"./AlertSuccess-C9Jw-JXb.js";import{B as he}from"./BackArrow-Bgx7EFmr.js";import{P as B}from"./PrimaryButton-D5raLki9.js";import{G,A as le}from"./AuthenticatedLayout-DHA9zIoR.js";import{L as ce,y as H}from"./index-DSFMyGGT.js";import{M as de}from"./Modal-CVilvA1y.js";import{N as ge}from"./NoDataSVG-BaWgnE2y.js";import"./ApplicationLogo-_tbeXFIx.js";import"./transition-EW8rDKNA.js";function K(c){return G({attr:{viewBox:"0 0 1024 1024",fill:"currentColor",fillRule:"evenodd"},child:[{tag:"path",attr:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64Zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372Zm128.013 198.826c.023.007.042.018.083.059l45.02 45.019c.04.04.05.06.058.083a.118.118 0 0 1 0 .07c-.007.022-.018.041-.059.082L557.254 512l127.861 127.862a.268.268 0 0 1 .05.06l.009.023a.118.118 0 0 1 0 .07c-.007.022-.018.041-.059.082l-45.019 45.02c-.04.04-.06.05-.083.058a.118.118 0 0 1-.07 0c-.022-.007-.041-.018-.082-.059L512 557.254 384.14 685.115c-.042.041-.06.052-.084.059a.118.118 0 0 1-.07 0c-.022-.007-.041-.018-.082-.059l-45.02-45.019c-.04-.04-.05-.06-.058-.083a.118.118 0 0 1 0-.07c.007-.022.018-.041.059-.082L466.745 512l-127.86-127.86a.268.268 0 0 1-.05-.061l-.009-.023a.118.118 0 0 1 0-.07c.007-.022.018-.041.059-.082l45.019-45.02c.04-.04.06-.05.083-.058a.118.118 0 0 1 .07 0c.022.007.041.018.082.059L512 466.745l127.862-127.86c.04-.041.06-.052.083-.059a.118.118 0 0 1 .07 0Z"},child:[]}]})(c)}function pe(c){return G({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M567.1 512l318.5-319.3c5-5 1.5-13.7-5.6-13.7h-90.5c-2.1 0-4.2.8-5.6 2.3l-273.3 274-90.2-90.5c12.5-22.1 19.7-47.6 19.7-74.8 0-83.9-68.1-152-152-152s-152 68.1-152 152 68.1 152 152 152c27.7 0 53.6-7.4 75.9-20.3l90 90.3-90.1 90.3A151.04 151.04 0 0 0 288 582c-83.9 0-152 68.1-152 152s68.1 152 152 152 152-68.1 152-152c0-27.2-7.2-52.7-19.7-74.8l90.2-90.5 273.3 274c1.5 1.5 3.5 2.3 5.6 2.3H880c7.1 0 10.7-8.6 5.6-13.7L567.1 512zM288 370c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80zm0 444c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(c)}const I={x:0,y:0,width:0,height:0,unit:"px"},N=(c,e,t)=>Math.min(Math.max(c,e),t),me=(...c)=>c.filter(e=>e&&typeof e=="string").join(" "),U=(c,e)=>c===e||c.width===e.width&&c.height===e.height&&c.x===e.x&&c.y===e.y&&c.unit===e.unit;function k(c,e,t){return c.unit==="%"?{...I,...c,unit:"%"}:{unit:"%",x:c.x?c.x/e*100:0,y:c.y?c.y/t*100:0,width:c.width?c.width/e*100:0,height:c.height?c.height/t*100:0}}function R(c,e,t){return c.unit?c.unit==="px"?{...I,...c,unit:"px"}:{unit:"px",x:c.x?c.x*e/100:0,y:c.y?c.y*t/100:0,width:c.width?c.width*e/100:0,height:c.height?c.height*t/100:0}:{...I,...c,unit:"px"}}function z(c,e,t,a,r,n=0,o=0,g=a,s=r){const i={...c};let l=Math.min(n,a),d=Math.min(o,r),m=Math.min(g,a),h=Math.min(s,r);e&&(e>1?(l=o?o*e:l,d=l/e,m=g*e):(d=n?n/e:d,l=d*e,h=s/e)),i.y<0&&(i.height=Math.max(i.height+i.y,d),i.y=0),i.x<0&&(i.width=Math.max(i.width+i.x,l),i.x=0);const y=a-(i.x+i.width);y<0&&(i.x=Math.min(i.x,a-l),i.width+=y);const f=r-(i.y+i.height);if(f<0&&(i.y=Math.min(i.y,r-d),i.height+=f),i.width<l&&((t==="sw"||t=="nw")&&(i.x-=l-i.width),i.width=l),i.height<d&&((t==="nw"||t=="ne")&&(i.y-=d-i.height),i.height=d),i.width>m&&((t==="sw"||t=="nw")&&(i.x-=m-i.width),i.width=m),i.height>h&&((t==="nw"||t=="ne")&&(i.y-=h-i.height),i.height=h),e){const b=i.width/i.height;if(b<e){const v=Math.max(i.width/e,d);(t==="nw"||t=="ne")&&(i.y-=v-i.height),i.height=v}else if(b>e){const v=Math.max(i.height*e,l);(t==="sw"||t=="nw")&&(i.x-=v-i.width),i.width=v}}return i}function we(c,e,t,a){const r={...c};return e==="ArrowLeft"?a==="nw"?(r.x-=t,r.y-=t,r.width+=t,r.height+=t):a==="w"?(r.x-=t,r.width+=t):a==="sw"?(r.x-=t,r.width+=t,r.height+=t):a==="ne"?(r.y+=t,r.width-=t,r.height-=t):a==="e"?r.width-=t:a==="se"&&(r.width-=t,r.height-=t):e==="ArrowRight"&&(a==="nw"?(r.x+=t,r.y+=t,r.width-=t,r.height-=t):a==="w"?(r.x+=t,r.width-=t):a==="sw"?(r.x+=t,r.width-=t,r.height-=t):a==="ne"?(r.y-=t,r.width+=t,r.height+=t):a==="e"?r.width+=t:a==="se"&&(r.width+=t,r.height+=t)),e==="ArrowUp"?a==="nw"?(r.x-=t,r.y-=t,r.width+=t,r.height+=t):a==="n"?(r.y-=t,r.height+=t):a==="ne"?(r.y-=t,r.width+=t,r.height+=t):a==="sw"?(r.x+=t,r.width-=t,r.height-=t):a==="s"?r.height-=t:a==="se"&&(r.width-=t,r.height-=t):e==="ArrowDown"&&(a==="nw"?(r.x+=t,r.y+=t,r.width-=t,r.height-=t):a==="n"?(r.y+=t,r.height-=t):a==="ne"?(r.y+=t,r.width-=t,r.height-=t):a==="sw"?(r.x-=t,r.width+=t,r.height+=t):a==="s"?r.height+=t:a==="se"&&(r.width+=t,r.height+=t)),r}const S={capture:!0,passive:!1};let ue=0;const M=class C extends D.PureComponent{constructor(){super(...arguments),this.docMoveBound=!1,this.mouseDownOnCrop=!1,this.dragStarted=!1,this.evData={startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0},this.componentRef=D.createRef(),this.mediaRef=D.createRef(),this.initChangeCalled=!1,this.instanceId=`rc-${ue++}`,this.state={cropIsActive:!1,newCropIsBeingDrawn:!1},this.onCropPointerDown=e=>{const{crop:t,disabled:a}=this.props,r=this.getBox();if(!t)return;const n=R(t,r.width,r.height);if(a)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const o=e.target.dataset.ord,g=!!o;let s=e.clientX,i=e.clientY,l=n.x,d=n.y;if(o){const m=e.clientX-r.x,h=e.clientY-r.y;let y=0,f=0;o==="ne"||o=="e"?(y=m-(n.x+n.width),f=h-n.y,l=n.x,d=n.y+n.height):o==="se"||o==="s"?(y=m-(n.x+n.width),f=h-(n.y+n.height),l=n.x,d=n.y):o==="sw"||o=="w"?(y=m-n.x,f=h-(n.y+n.height),l=n.x+n.width,d=n.y):(o==="nw"||o=="n")&&(y=m-n.x,f=h-n.y,l=n.x+n.width,d=n.y+n.height),s=l+r.x+y,i=d+r.y+f}this.evData={startClientX:s,startClientY:i,startCropX:l,startCropY:d,clientX:e.clientX,clientY:e.clientY,isResize:g,ord:o},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})},this.onComponentPointerDown=e=>{const{crop:t,disabled:a,locked:r,keepSelection:n,onChange:o}=this.props,g=this.getBox();if(a||r||n&&t)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const s=e.clientX-g.x,i=e.clientY-g.y,l={unit:"px",x:s,y:i,width:0,height:0};this.evData={startClientX:e.clientX,startClientY:e.clientY,startCropX:s,startCropY:i,clientX:e.clientX,clientY:e.clientY,isResize:!0},this.mouseDownOnCrop=!0,o(R(l,g.width,g.height),k(l,g.width,g.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})},this.onDocPointerMove=e=>{const{crop:t,disabled:a,onChange:r,onDragStart:n}=this.props,o=this.getBox();if(a||!t||!this.mouseDownOnCrop)return;e.cancelable&&e.preventDefault(),this.dragStarted||(this.dragStarted=!0,n&&n(e));const{evData:g}=this;g.clientX=e.clientX,g.clientY=e.clientY;let s;g.isResize?s=this.resizeCrop():s=this.dragCrop(),U(t,s)||r(R(s,o.width,o.height),k(s,o.width,o.height))},this.onComponentKeyDown=e=>{const{crop:t,disabled:a,onChange:r,onComplete:n}=this.props;if(a)return;const o=e.key;let g=!1;if(!t)return;const s=this.getBox(),i=this.makePixelCrop(s),l=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?C.nudgeStepLarge:e.shiftKey?C.nudgeStepMedium:C.nudgeStep;if(o==="ArrowLeft"?(i.x-=l,g=!0):o==="ArrowRight"?(i.x+=l,g=!0):o==="ArrowUp"?(i.y-=l,g=!0):o==="ArrowDown"&&(i.y+=l,g=!0),g){e.cancelable&&e.preventDefault(),i.x=N(i.x,0,s.width-i.width),i.y=N(i.y,0,s.height-i.height);const d=R(i,s.width,s.height),m=k(i,s.width,s.height);r(d,m),n&&n(d,m)}},this.onHandlerKeyDown=(e,t)=>{const{aspect:a=0,crop:r,disabled:n,minWidth:o=0,minHeight:g=0,maxWidth:s,maxHeight:i,onChange:l,onComplete:d}=this.props,m=this.getBox();if(n||!r)return;if(e.key==="ArrowUp"||e.key==="ArrowDown"||e.key==="ArrowLeft"||e.key==="ArrowRight")e.stopPropagation(),e.preventDefault();else return;const h=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?C.nudgeStepLarge:e.shiftKey?C.nudgeStepMedium:C.nudgeStep,y=R(r,m.width,m.height),f=we(y,e.key,h,t),b=z(f,a,t,m.width,m.height,o,g,s,i);if(!U(r,b)){const v=k(b,m.width,m.height);l(b,v),d&&d(b,v)}},this.onDocPointerDone=e=>{const{crop:t,disabled:a,onComplete:r,onDragEnd:n}=this.props,o=this.getBox();this.unbindDocMove(),!(a||!t)&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,n&&n(e),r&&r(R(t,o.width,o.height),k(t,o.width,o.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))},this.onDragFocus=()=>{var e;(e=this.componentRef.current)==null||e.scrollTo(0,0)}}get document(){return document}getBox(){const e=this.mediaRef.current;if(!e)return{x:0,y:0,width:0,height:0};const{x:t,y:a,width:r,height:n}=e.getBoundingClientRect();return{x:t,y:a,width:r,height:n}}componentDidUpdate(e){const{crop:t,onComplete:a}=this.props;if(a&&!e.crop&&t){const{width:r,height:n}=this.getBox();r&&n&&a(R(t,r,n),k(t,r,n))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect(),this.unbindDocMove()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,S),this.document.addEventListener("pointerup",this.onDocPointerDone,S),this.document.addEventListener("pointercancel",this.onDocPointerDone,S),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,S),this.document.removeEventListener("pointerup",this.onDocPointerDone,S),this.document.removeEventListener("pointercancel",this.onDocPointerDone,S),this.docMoveBound=!1)}getCropStyle(){const{crop:e}=this.props;if(e)return{top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`}}dragCrop(){const{evData:e}=this,t=this.getBox(),a=this.makePixelCrop(t),r=e.clientX-e.startClientX,n=e.clientY-e.startClientY;return a.x=N(e.startCropX+r,0,t.width-a.width),a.y=N(e.startCropY+n,0,t.height-a.height),a}getPointRegion(e,t,a,r){const{evData:n}=this,o=n.clientX-e.x,g=n.clientY-e.y;let s;r&&t?s=t==="nw"||t==="n"||t==="ne":s=g<n.startCropY;let i;return a&&t?i=t==="nw"||t==="w"||t==="sw":i=o<n.startCropX,i?s?"nw":"sw":s?"ne":"se"}resolveMinDimensions(e,t,a=0,r=0){const n=Math.min(a,e.width),o=Math.min(r,e.height);return!t||!n&&!o?[n,o]:t>1?n?[n,n/t]:[o*t,o]:o?[o*t,o]:[n,n/t]}resizeCrop(){const{evData:e}=this,{aspect:t=0,maxWidth:a,maxHeight:r}=this.props,n=this.getBox(),[o,g]=this.resolveMinDimensions(n,t,this.props.minWidth,this.props.minHeight);let s=this.makePixelCrop(n);const i=this.getPointRegion(n,e.ord,o,g),l=e.ord||i;let d=e.clientX-e.startClientX,m=e.clientY-e.startClientY;(o&&l==="nw"||l==="w"||l==="sw")&&(d=Math.min(d,-o)),(g&&l==="nw"||l==="n"||l==="ne")&&(m=Math.min(m,-g));const h={unit:"px",x:0,y:0,width:0,height:0};i==="ne"?(h.x=e.startCropX,h.width=d,t?(h.height=h.width/t,h.y=e.startCropY-h.height):(h.height=Math.abs(m),h.y=e.startCropY-h.height)):i==="se"?(h.x=e.startCropX,h.y=e.startCropY,h.width=d,t?h.height=h.width/t:h.height=m):i==="sw"?(h.x=e.startCropX+d,h.y=e.startCropY,h.width=Math.abs(d),t?h.height=h.width/t:h.height=m):i==="nw"&&(h.x=e.startCropX+d,h.width=Math.abs(d),t?(h.height=h.width/t,h.y=e.startCropY-h.height):(h.height=Math.abs(m),h.y=e.startCropY+m));const y=z(h,t,i,n.width,n.height,o,g,a,r);return t||C.xyOrds.indexOf(l)>-1?s=y:C.xOrds.indexOf(l)>-1?(s.x=y.x,s.width=y.width):C.yOrds.indexOf(l)>-1&&(s.y=y.y,s.height=y.height),s.x=N(s.x,0,n.width-s.width),s.y=N(s.y,0,n.height-s.height),s}renderCropSelection(){const{ariaLabels:e=C.defaultProps.ariaLabels,disabled:t,locked:a,renderSelectionAddon:r,ruleOfThirds:n,crop:o}=this.props,g=this.getCropStyle();if(o)return u.createElement("div",{style:g,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":e.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!t&&!a&&u.createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},u.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),u.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),u.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),u.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),u.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":e.nwDragHandle,onKeyDown:s=>this.onHandlerKeyDown(s,"nw"),role:"button"}),u.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":e.nDragHandle,onKeyDown:s=>this.onHandlerKeyDown(s,"n"),role:"button"}),u.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":e.neDragHandle,onKeyDown:s=>this.onHandlerKeyDown(s,"ne"),role:"button"}),u.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":e.eDragHandle,onKeyDown:s=>this.onHandlerKeyDown(s,"e"),role:"button"}),u.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":e.seDragHandle,onKeyDown:s=>this.onHandlerKeyDown(s,"se"),role:"button"}),u.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":e.sDragHandle,onKeyDown:s=>this.onHandlerKeyDown(s,"s"),role:"button"}),u.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":e.swDragHandle,onKeyDown:s=>this.onHandlerKeyDown(s,"sw"),role:"button"}),u.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":e.wDragHandle,onKeyDown:s=>this.onHandlerKeyDown(s,"w"),role:"button"})),r&&u.createElement("div",{className:"ReactCrop__selection-addon",onPointerDown:s=>s.stopPropagation()},r(this.state)),n&&u.createElement(u.Fragment,null,u.createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),u.createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(e){const t={...I,...this.props.crop||{}};return R(t,e.width,e.height)}render(){const{aspect:e,children:t,circularCrop:a,className:r,crop:n,disabled:o,locked:g,style:s,ruleOfThirds:i}=this.props,{cropIsActive:l,newCropIsBeingDrawn:d}=this.state,m=n?this.renderCropSelection():null,h=me("ReactCrop",r,l&&"ReactCrop--active",o&&"ReactCrop--disabled",g&&"ReactCrop--locked",d&&"ReactCrop--new-crop",n&&e&&"ReactCrop--fixed-aspect",n&&a&&"ReactCrop--circular-crop",n&&i&&"ReactCrop--rule-of-thirds",!this.dragStarted&&n&&!n.width&&!n.height&&"ReactCrop--invisible-crop",a&&"ReactCrop--no-animate");return u.createElement("div",{ref:this.componentRef,className:h,style:s},u.createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},t),n?u.createElement("svg",{className:"ReactCrop__crop-mask",width:"100%",height:"100%"},u.createElement("defs",null,u.createElement("mask",{id:`hole-${this.instanceId}`},u.createElement("rect",{width:"100%",height:"100%",fill:"white"}),a?u.createElement("ellipse",{cx:`${n.x+n.width/2}${n.unit}`,cy:`${n.y+n.height/2}${n.unit}`,rx:`${n.width/2}${n.unit}`,ry:`${n.height/2}${n.unit}`,fill:"black"}):u.createElement("rect",{x:`${n.x}${n.unit}`,y:`${n.y}${n.unit}`,width:`${n.width}${n.unit}`,height:`${n.height}${n.unit}`,fill:"black"}))),u.createElement("rect",{fill:"black",fillOpacity:.5,width:"100%",height:"100%",mask:`url(#hole-${this.instanceId})`})):void 0,m)}};M.xOrds=["e","w"],M.yOrds=["n","s"],M.xyOrds=["nw","ne","se","sw"],M.nudgeStep=1,M.nudgeStepMedium=10,M.nudgeStepLarge=100,M.defaultProps={ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}};let xe=M;function Se({auth:c,permissions:e,avator:t,success:a,error:r,project_id:n,images:o}){var X;const g=D.useRef(null),[s,i]=D.useState(o),[l,d]=D.useState([]),[m,h]=D.useState(!1),[y,f]=D.useState(null),[b,v]=D.useState({aspect:16/9}),[P,L]=D.useState(null),Y=15,{data:W,setData:A,post:F,processing:T,reset:Z}=ie({project_id:n,images:l||[]}),q=w=>{const x=Array.from(w.target.files);if(l.length+x.length>Y){H.error(`You can only upload a maximum of ${Y} images.`);return}d([...l,...x]),A("images",[...W.images,...x])},V=w=>{const x=l.filter((j,E)=>E!==w);d(x),A("images",x)};_.defaults.headers.common["X-CSRF-TOKEN"]=(X=document.querySelector('meta[name="csrf-token"]'))==null?void 0:X.getAttribute("content");const J=async w=>{try{(await _.delete(route("projects.delete-image",{project_id:n,media_id:w}))).status===200&&(H.success("Image deleted successfully!"),i(o.filter(j=>j.id!==w)))}catch(x){H.error("An error occurred while deleting the image."+x)}},Q=w=>{f(URL.createObjectURL(w)),h(!0)},O=()=>{h(!1),f(null),L(null)},ee=w=>{if(y&&w.width&&w.height){const x=new Image;x.src=y,x.onload=()=>{const j=document.createElement("canvas"),E=x.naturalWidth/x.width,$=x.naturalHeight/x.height;j.width=w.width,j.height=w.height,j.getContext("2d").drawImage(x,w.x*E,w.y*$,w.width*E,w.height*$,0,0,w.width,w.height),j.toBlob(ne=>{L(URL.createObjectURL(ne))})}}},te=()=>{d(w=>[...w,P]),O()},re=w=>{w.preventDefault(),F(route("projects.store-gallery",{id:n}),{onSuccess:()=>{Z(),d([]),g.current&&g.current.getEditor().setText("")}})};return p.jsxs(le,{user:c.user,permissions:e,avator:t,header:p.jsx("div",{className:"flex items-center space-x-2",children:p.jsx(he,{link:"projects.index",text:"Project Gallery"})}),children:[p.jsx(ae,{title:"Create Project Gallery"}),p.jsx("div",{className:"py-2",children:p.jsxs("div",{className:"max-w-7xl mx-auto",children:[a&&p.jsx(se,{success:a}),r&&p.jsx(oe,{error:r}),p.jsxs("div",{className:"max-w-full rounded shadow-sm m-2 overflow-hidden bg-white dark:bg-gray-800",children:[p.jsx("form",{onSubmit:re,className:"space-y-8 p-4",children:p.jsxs("div",{className:"space-y-3",children:[p.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:q,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),p.jsx("div",{className:"flex flex-wrap gap-4 mt-4",children:l.length>0?l.map((w,x)=>p.jsxs("div",{className:"relative",children:[p.jsx("img",{src:typeof w=="string"?w:URL.createObjectURL(w),alt:"Preview",className:"max-w-full max-h-60 rounded-lg object-contain"}),p.jsx(K,{className:"absolute top-1 right-8 text-red-500 cursor-pointer",size:24,onClick:()=>V(x)}),p.jsx(pe,{className:"absolute top-1 right-1 text-blue-500 cursor-pointer",size:24,onClick:()=>Q(w)})]},x)):p.jsx("div",{className:"flex items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-12 h-12 text-gray-400",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})})}),p.jsx(B,{className:"ms-0 mt-2 mb-3",disabled:T,children:"Save"})]})}),p.jsx("h3",{className:"text-gray-900 dark:text-gray-200 px-3",children:"Existing Images in Gallery"}),p.jsx("div",{className:"flex flex-wrap gap-4 mt-4",children:s.length>0?s.map((w,x)=>p.jsxs("div",{className:"relative",children:[p.jsx("img",{src:s[x].url,alt:"Preview",className:"max-w-full max-h-60 rounded-lg object-contain"}),p.jsx(K,{className:"absolute top-1 right-8 text-red-500 cursor-pointer",size:24,onClick:()=>J(s[x].id)})]},x)):p.jsx("div",{className:"flex items-center justify-center w-full h-fit  my-40  border-gray-300 rounded-lg",children:p.jsx(ge,{})})})]})]})}),p.jsxs(de,{show:m,onClose:O,children:[p.jsx(xe,{crop:b,onChange:v,onComplete:ee,children:p.jsx("img",{src:y,alt:"Crop",className:"max-w-full"})}),P&&p.jsxs("div",{className:"mt-4",children:[p.jsx("img",{src:P,alt:"Cropped Preview",className:"max-w-full rounded-lg"}),p.jsx(B,{onClick:te,className:"mt-2",children:"Confirm Crop"})]})]}),p.jsx(ce,{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})}export{Se as default};
