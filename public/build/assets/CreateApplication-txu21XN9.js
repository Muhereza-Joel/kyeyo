import{r as d,j as e,m as A,L as B}from"./app-DofdhDlf.js";import{A as L,a as P}from"./AlertSuccess-BZWRwnZU.js";import{y as N,L as I}from"./index-BQXQjJq2.js";import{G as w}from"./index-BlwJtI6Y.js";import{I as k}from"./InputError-CJnewLnD.js";import{I as R}from"./InputLabel-Cclb1mcP.js";import{P as E}from"./PrimaryButton-B3at0oRx.js";import{Q as U}from"./QuillEditor-DiVgpFov.js";import{A as D,u as _}from"./AuthenticatedLayout--WEj07KO.js";import{B as M}from"./BackArrow-BCZwj-_T.js";import"./ApplicationLogo-BpriETFE.js";import"./transition-DCcBHnqm.js";function T(r){return w({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(r)}function z(r){return w({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(r)}const C=({label:r,name:s,required:i=!1,maxSizeMB:m=2,onFileSelect:p})=>{const[l,h]=d.useState(""),[f,x]=d.useState(0),o=d.useRef(null),j=n=>{const t=n.target.files[0];if(!t)return;if(t.size/(1024*1024)>m){N.error(`File size exceeds ${m}MB limit.`);return}h(t.name),x(0),y(),p(s,t)},y=n=>{let t=0;const c=setInterval(()=>{t+=10,x(t),t>=100&&clearInterval(c)},200)},g=()=>{i&&!l&&(N.error(`Please upload a file for ${r}.`),o.current.focus())},v=()=>{h(""),x(0),o.current.value="",p(s,null),N.info(`${r} file removed.`)};return e.jsxs("div",{children:[e.jsxs("label",{htmlFor:s,className:"block font-medium text-gray-700 dark:text-gray-200",children:[r," ",i&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex items-center gap-2 border p-2 rounded cursor-pointer dark:border-gray-600 dark:bg-gray-800",onClick:()=>o.current.click(),onBlur:g,children:[e.jsx(z,{className:"text-gray-600 dark:text-gray-300"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:l||"Choose a file"})]}),e.jsx("input",{ref:o,type:"file",name:s,accept:".pdf,.doc,.docx",onChange:j,className:"hidden",required:i,onBlur:g}),l&&e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["Selected: ",l]}),e.jsx("button",{onClick:n=>{n.stopPropagation(),v()},className:"text-red-500 hover:text-red-700",children:e.jsx(T,{})})]})]})};function Z({auth:r,success:s,error:i,permissions:m,job_id:p,avator:l}){const{can:h}=_(m),f=d.useRef(null),[x,o]=d.useState(null),[j,y]=d.useState(null),{data:g,setData:v,post:n,processing:t,errors:c,reset:F}=A({job_id:p,cover_letter:"",cv:x,transcript:j}),b=(a,u)=>{v(a,u),a==="cv"&&o(u?u.name:""),a==="transcript"&&y(u?u.name:"")},S=a=>{a.preventDefault(),n(route("applications.store"),{onSuccess:()=>{F(),f.current&&f.current.getEditor().setText("")}})};return e.jsxs(D,{user:r.user,permissions:m,avator:l,header:e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(M,{link:"jobs.show",text:"Create Application",params:{id:p}})}),children:[e.jsx(B,{title:"Create New Application"}),e.jsxs("div",{className:"py-2 max-w-7xl mx-auto sm:px-6 lg:px-8",children:[s&&e.jsx(L,{success:s}),i&&e.jsx(P,{error:i}),e.jsx("div",{className:"max-w-full rounded shadow-sm m-2 overflow-hidden bg-white dark:bg-gray-800",children:e.jsx("div",{className:"px-4 pt-4 pb-2",children:e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(R,{htmlFor:"cover_letter",value:"Please explain why you think you are the best candidate for this position"}),e.jsx(U,{id:"cover_letter",ref:f,value:g.cover_letter,onChange:a=>v("cover_letter",a.target.value),style:{height:"300px",marginBottom:"3.5em"},placeholder:"Write your explanation here..."}),e.jsx(k,{message:c.cover_letter,className:"mt-2"})]}),e.jsx(C,{label:"Upload Request Letter (PDF, DOC, DOCX)",name:"cv",required:!0,onFileSelect:b}),e.jsx(k,{message:c.cv,className:"mt-2"}),e.jsx(C,{label:"Upload Transcript (Optional)",name:"transcript",onFileSelect:b}),e.jsx(k,{message:c.transcript,className:"mt-2"}),h("Create Application")&&e.jsx("div",{className:"flex items-center justify-start",children:e.jsx(E,{className:"ms-0 mt-2 mb-3",disabled:t,children:"Save"})}),e.jsx(I,{})]})})})]})]})}export{Z as default};
